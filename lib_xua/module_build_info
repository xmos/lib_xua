VERSION = 0.3.0

DEPENDENT_MODULES = lib_logging(>=2.1.0) \
                    lib_xassert(>=2.0.0) \
                    lib_xud(>=0.1.0) \
                    lib_spdif(>=3.0.0) \
                    lib_mic_array(>=3.2.0)

MODULE_XCC_FLAGS = $(XCC_FLAGS) \
                   -O3 \
                   -DREF_CLK_FREQ=100 \
                   -fasm-linenum \
                   -fcomment-asm

# Core
XCC_FLAGS_xua_endpoint0.c = $(MODULE_XCC_FLAGS) -Os -mno-dual-issue
XCC_FLAGS_xua_ep0_uacreqs.xc = $(MODULE_XCC_FLAGS) -Os -mno-dual-issue
XCC_FLAGS_dbcalc.xc = $(MODULE_XCC_FLAGS) -Os -mno-dual-issue
XCC_FLAGS_audioports.c = $(MODULE_XCC_FLAGS) -Os -mno-dual-issue
XCC_FLAGS_audioports.xc = $(MODULE_XCC_FLAGS) -Os -mno-dual-issue

# DFU
XCC_FLAGS_dfu.xc = $(MODULE_XCC_FLAGS) -Os -mno-dual-issue
XCC_FLAGS_flash_interface.c = $(MODULE_XCC_FLAGS) -Os -mno-dual-issue
XCC_FLAGS_flashlib_user.c = $(MODULE_XCC_FLAGS) -Os -mno-dual-issue

OPTIONAL_HEADERS += xua_conf.h

EXPORT_INCLUDE_DIRS = api \
                      src/core \
                      src/core/audiohub \
                      src/core/buffer/ep \
                      src/core/endpoint0 \
                      src/dfu

INCLUDE_DIRS = $(EXPORT_INCLUDE_DIRS) \
               src/core/buffer/decouple \
               src/core/clocking \
               src/core/mixer \
               src/core/pdm_mics \
               src/core/ports \
               src/core/support \
               src/core/support/powersave \
               src/core/user \
               src/core/user/audiostream \
               src/core/user/hostactive \
               src/midi

SOURCE_DIRS = src/core \
              src/core/audiohub \
              src/core/buffer/decouple \
              src/core/buffer/ep \
              src/core/clocking \
              src/core/endpoint0 \
              src/core/mixer \
              src/core/pdm_mics \
              src/core/ports \
              src/core/support \
              src/core/support/powersave \
              src/core/user/audiostream \
              src/core/user/hostactive \
              src/core/xuduser \
              src/dfu \
              src/midi

EXCLUDE_FILES += descriptors_2.rst
